<?xml version="1.0" encoding="utf-8" ?>
<update comment="Update ecoClassify to version 2.3">

  <!-- Add new column AdvancedClassifierOptions to AdvancedClassifierOptions -->
  <action code="Exec" condition="TableExists" criteria="ecoClassify_AdvancedClassifierOptions">
    <item>ALTER TABLE ecoClassify_AdvancedClassifierOptions ADD COLUMN overrideBandnames BOOLEAN</item>
  </action>

  <!-- Add new column ClassifiedFilteredRestricted to ClassifiedRasterOutput -->
  <action code="Exec" condition="TableExists" criteria="ecoClassify_ClassifiedRasterOutput">
    <item>ALTER TABLE ecoClassify_ClassifiedRasterOutput ADD COLUMN ClassifiedFilteredRestricted TEXT</item>
  </action>

  <!-- Add new column PredictedFilteredRestricted to RasterOutput -->
  <action code="Exec" condition="TableExists" criteria="ecoClassify_RasterOutput">
    <item>ALTER TABLE ecoClassify_RasterOutput ADD COLUMN PredictedFilteredRestricted TEXT</item>
  </action>

  <action code="Exec" condition="TableExists" criteria="ecoClassify_AdvancedClassifierOptions">
    <item>UPDATE ecoClassify_AdvancedClassifierOptions
           SET overrideBandnames=0,
               normalizeRasters=0,
               rasterDecimalPlaces=2,
               modelTuning=0,
               tuningObjective=5,
               setManualThreshold=0,
               manualThreshold=0.5,
               applyContextualization=0,
               contextualizationWindowSize=3,
               setSeed=0
           WHERE AdvancedClassifierOptionsId=1</item>
  </action>

</update>
